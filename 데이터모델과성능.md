# 데이터 모델과 성능
----


## 성능 데이터 모델링?
데이터베이스 성능 향상을 목적으로, 설계 단계의 데이터 모델링 때부터 성능과 관련된 사항이 데이터 모델링에 반영될 수 있도록 하는 것
* 일반적으로 성능이란, 데이터의 조회 성능을 의미한다.

#### 성능 데이터 모델링의 수행 시점
- 사전에 할수록 비용 절감
- SQL 문장 튜닝
- 하드 용량 증설
- 데이터 증가가 빠를수록 성능 저하


## 성능 데이터 모델링 수행 절차
1. 데이터 모델링을 할 때 정규화를 정확하게 수행
2. 데이터베이스 용량산정을 수행
3. 데이터베이스에 발생되는 트랜잭션의 유형을 파악
4. 용량과 트랜잭션의 유형에 따라 반정규화를 수행
5. 이력모델의 조정, PK/FK 조정, 슈퍼타입/서브타입 조정 등을 수행
 - 슈퍼타입과 서브타입의 관계는 배타적 관계와 포괄적 관계가 있는데, 배타적 관계는 고객이 개인이거나 법인고객인 경우를 의미하며 포괄적인 관계는 고객이 개인고객일 수도 있고 법인고객일 수도 있는 것  
6. 성능 관점에서 데이터 모델을 검증

* 정규화가 항상 조회 성능을 저하시킨다는 것은 잘못된 생각이며 기본적으로 중복된 데이터를 제거함으로써 조회성능을 향상시킬 수 있다.


### 슈퍼타입과 서브타입
* 슈퍼타입은 대분류, 서브타입은 소분류로 생각하면 쉽다.

- 슈퍼타입과 서브타입 변환법
  1. One to one type : 슈퍼타입, 서브타입을 각각의 테이블로 (1:1)
  2. Plus type : 조인이 발생하고 관리가 어려움
  3. Single type(All in one type) : 슈퍼타입, 서브타입을 하나의 테이블로


#### 논리 데이터 모델의 슈퍼-서브타입을 물리적 테이블로 변환하면
1. 트랜잭션은 항상 전체를 대상으로 일괄처리하고 통합하여 분석 처리 -> 하나로 통합되어 있으므로 집적된 데이터만 읽어올 수 있어서 성능이 우수
2. 서브 타입을 개별로 처리하고 테이블은 하나로 통합하면 불필요하게 많은 양의 데이터가 집적되어 성능이 저하된다.
3. 슈퍼/서브 타입을 개별로 유지하면 조인에 의해 성능이 저하된다.


